{"ast":null,"code":"import _defineProperty from \"F:\\\\xampp\\\\htdocs\\\\BtlCNWeb\\\\Admin\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"F:\\\\xampp\\\\htdocs\\\\BtlCNWeb\\\\Admin\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\xampp\\\\htdocs\\\\BtlCNWeb\\\\Admin\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\xampp\\\\htdocs\\\\BtlCNWeb\\\\Admin\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\xampp\\\\htdocs\\\\BtlCNWeb\\\\Admin\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\xampp\\\\htdocs\\\\BtlCNWeb\\\\Admin\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"F:\\\\xampp\\\\htdocs\\\\BtlCNWeb\\\\Admin\\\\src\\\\pages\\\\App.js\";\nimport React from \"react\";\nimport { ThemeProvider } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport { grey } from \"@material-ui/core/colors\";\nimport PersonAdd from \"@material-ui/icons/PersonAdd\";\nimport Help from \"@material-ui/icons/Help\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport theme from \"../theme\";\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Slide from \"@material-ui/core/Slide\";\nvar Transition = React.forwardRef(function Transition(props, ref) {\n  return /*#__PURE__*/React.createElement(Slide, Object.assign({\n    direction: \"up\",\n    ref: ref\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 10\n    }\n  }));\n});\n\nvar LoginPage = /*#__PURE__*/function (_React$Component) {\n  _inherits(LoginPage, _React$Component);\n\n  function LoginPage() {\n    var _this;\n\n    _classCallCheck(this, LoginPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LoginPage).call(this));\n\n    _this.onChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        open: false\n      });\n    };\n\n    _this.onHandleLogin = function () {\n      axios({\n        method: 'POST',\n        url: '/api/login',\n        data: {\n          email: _this.state.email,\n          password: _this.state.password\n        }\n      }).then(function (response) {\n        if (response.data.role === \"admin\") {\n          console.log(response.data);\n          localStorage.setItem(\"token\", response.data.token); // localStorage.setItem(\"user_name\", response.data.user.name);\n\n          localStorage.setItem(\"islogged\", true);\n          localStorage.setItem(\"admin_avatar\", response.data.user.avatar); // localStorage.setItem(\"admin_name\",response.data.user.name)\n\n          _this.setState({\n            redirectToReferrer: true\n          });\n        }\n      }).catch(function (error) {\n        _this.setState({\n          open: true\n        }); // handle error\n\n\n        console.log(error);\n      });\n    };\n\n    _this.state = {\n      email: '',\n      password: '',\n      redirectToReferrer: false,\n      open: false\n    };\n    return _this;\n  }\n\n  _createClass(LoginPage, [{\n    key: \"render\",\n    value: function render() {\n      var styles = {\n        loginContainer: {\n          minWidth: 320,\n          maxWidth: 400,\n          height: \"auto\",\n          position: \"absolute\",\n          top: \"20%\",\n          left: 0,\n          right: 0,\n          margin: \"auto\"\n        },\n        paper: {\n          padding: 20,\n          overflow: \"auto\"\n        },\n        buttonsDiv: {\n          textAlign: \"center\",\n          padding: 10\n        },\n        flatButton: {\n          color: grey[500],\n          margin: 5\n        },\n        checkRemember: {\n          style: {\n            float: \"left\",\n            maxWidth: 180,\n            paddingTop: 5\n          },\n          labelStyle: {\n            color: grey[500]\n          },\n          iconStyle: {\n            color: grey[500],\n            borderColor: grey[500],\n            fill: grey[500]\n          }\n        },\n        loginBtn: {\n          float: \"right\"\n        },\n        btn: {\n          background: \"#4f81e9\",\n          color: \"white\",\n          padding: 7,\n          borderRadius: 2,\n          margin: 2,\n          fontSize: 13\n        },\n        btnFacebook: {\n          background: \"#4f81e9\"\n        },\n        btnGoogle: {\n          background: \"#e14441\"\n        },\n        btnSpan: {\n          marginLeft: 5\n        }\n      };\n\n      if (this.state.redirectToReferrer) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: {\n            pathname: '/admin/home',\n            state: {\n              redirectToReferrer: true\n            }\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }\n        });\n      }\n\n      return /*#__PURE__*/React.createElement(ThemeProvider, {\n        theme: theme,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: styles.loginContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Paper, {\n        style: styles.paper,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(InputLabel, {\n        htmlFor: \"component-simple\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 17\n        }\n      }, \"Email\"), /*#__PURE__*/React.createElement(Input, {\n        type: \"email\",\n        placeholder: \"E-mail\",\n        fullWidth: true,\n        onChange: this.onChange,\n        name: \"email\",\n        value: this.state.email,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          marginTop: 16\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(InputLabel, {\n        htmlFor: \"component-simple\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 17\n        }\n      }, \"Password\"), /*#__PURE__*/React.createElement(Input, {\n        type: \"password\",\n        placeholder: \"Password...\",\n        fullWidth: true,\n        onChange: this.onChange,\n        name: \"password\",\n        value: this.state.password,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          marginTop: 10\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(FormControlLabel, {\n        control: /*#__PURE__*/React.createElement(Checkbox, {\n          label: \"Remember me\",\n          style: styles.checkRemember.style,\n          labelStyle: styles.checkRemember.labelStyle,\n          iconStyle: styles.checkRemember.iconStyle,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 23\n          }\n        }),\n        label: \"Remember me\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        style: styles.loginBtn,\n        onClick: this.onHandleLogin,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 21\n        }\n      }, \"Login\")))), /*#__PURE__*/React.createElement(\"div\", {\n        style: styles.buttonsDiv,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        href: \"/admin/home\",\n        style: styles.flatButton,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(PersonAdd, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          margin: 5\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 17\n        }\n      }, \"Register\")), /*#__PURE__*/React.createElement(Button, {\n        href: \"/admin/home\",\n        style: styles.flatButton,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Help, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          margin: 5\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 17\n        }\n      }, \"Forgot Password?\"))))), /*#__PURE__*/React.createElement(Dialog, {\n        open: this.state.open,\n        TransitionComponent: Transition,\n        keepMounted: true,\n        onClose: this.handleClose,\n        \"aria-labelledby\": \"alert-dialog-slide-title\",\n        \"aria-describedby\": \"alert-dialog-slide-description\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(DialogTitle, {\n        id: \"alert-dialog-slide-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 9\n        }\n      }, \"Login Failed!\"), /*#__PURE__*/React.createElement(DialogContent, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(DialogContentText, {\n        id: \"alert-dialog-slide-description\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }\n      }, \"Mat khau khong chinh xac!\")), /*#__PURE__*/React.createElement(DialogActions, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        onClick: this.handleClose,\n        color: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }\n      }, \"OK\"))));\n    }\n  }]);\n\n  return LoginPage;\n}(React.Component);\n\n;\nexport default LoginPage;","map":{"version":3,"sources":["F:/xampp/htdocs/BtlCNWeb/Admin/src/pages/App.js"],"names":["React","ThemeProvider","Paper","Button","Checkbox","grey","PersonAdd","Help","FormControlLabel","theme","Input","InputLabel","axios","Redirect","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Slide","Transition","forwardRef","props","ref","LoginPage","onChange","event","setState","target","name","value","handleClose","open","onHandleLogin","method","url","data","email","state","password","then","response","role","console","log","localStorage","setItem","token","user","avatar","redirectToReferrer","catch","error","styles","loginContainer","minWidth","maxWidth","height","position","top","left","right","margin","paper","padding","overflow","buttonsDiv","textAlign","flatButton","color","checkRemember","style","float","paddingTop","labelStyle","iconStyle","borderColor","fill","loginBtn","btn","background","borderRadius","fontSize","btnFacebook","btnGoogle","btnSpan","marginLeft","pathname","marginTop","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { ThemeProvider } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport { grey } from \"@material-ui/core/colors\";\r\nimport PersonAdd from \"@material-ui/icons/PersonAdd\";\r\nimport Help from \"@material-ui/icons/Help\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport theme from \"../theme\";\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\n\r\nimport axios from 'axios';\r\nimport {Redirect} from 'react-router-dom';\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\n\r\n\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\nclass LoginPage extends React.Component {\r\n\r\n\r\n  \r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n        email: '',\r\n        password: '',\r\n        redirectToReferrer: false,\r\n        open: false\r\n    }\r\n  }\r\n\r\n\r\n  onChange = (event) => {\r\n      this.setState({\r\n          [event.target.name]: event.target.value\r\n      })\r\n  }\r\n  handleClose = () => {\r\n    this.setState({\r\n      open: false\r\n    })\r\n  }\r\n\r\n\r\n  onHandleLogin = () => {\r\n      axios({\r\n          method: 'POST',\r\n          url: '/api/login',\r\n          data: {\r\n              email: this.state.email,\r\n              password: this.state.password\r\n          }\r\n      }).then((response) => {\r\n          if (response.data.role === \"admin\")\r\n          {\r\n            console.log(response.data);\r\n            localStorage.setItem(\"token\", response.data.token);\r\n            // localStorage.setItem(\"user_name\", response.data.user.name);\r\n            localStorage.setItem(\"islogged\",true);\r\n            localStorage.setItem(\"admin_avatar\",response.data.user.avatar)\r\n            // localStorage.setItem(\"admin_name\",response.data.user.name)\r\n            this.setState({redirectToReferrer:true}); \r\n          \r\n          }\r\n      }).catch((error) => {\r\n        this.setState({\r\n          open: true\r\n        })\r\n          // handle error\r\n          console.log(error);\r\n      });\r\n      \r\n  }\r\n  render(){\r\n    const styles = {\r\n      loginContainer: {\r\n        minWidth: 320,\r\n        maxWidth: 400,\r\n        height: \"auto\",\r\n        position: \"absolute\",\r\n        top: \"20%\",\r\n        left: 0,\r\n        right: 0,\r\n        margin: \"auto\"\r\n      },\r\n      paper: {\r\n        padding: 20,\r\n        overflow: \"auto\"\r\n      },\r\n      buttonsDiv: {\r\n        textAlign: \"center\",\r\n        padding: 10\r\n      },\r\n      flatButton: {\r\n        color: grey[500],\r\n        margin: 5\r\n      },\r\n      checkRemember: {\r\n        style: {\r\n          float: \"left\",\r\n          maxWidth: 180,\r\n          paddingTop: 5\r\n        },\r\n        labelStyle: {\r\n          color: grey[500]\r\n        },\r\n        iconStyle: {\r\n          color: grey[500],\r\n          borderColor: grey[500],\r\n          fill: grey[500]\r\n        }\r\n      },\r\n      loginBtn: {\r\n        float: \"right\"\r\n      },\r\n      btn: {\r\n        background: \"#4f81e9\",\r\n        color: \"white\",\r\n        padding: 7,\r\n        borderRadius: 2,\r\n        margin: 2,\r\n        fontSize: 13\r\n      },\r\n      btnFacebook: {\r\n        background: \"#4f81e9\"\r\n      },\r\n      btnGoogle: {\r\n        background: \"#e14441\"\r\n      },\r\n      btnSpan: {\r\n        marginLeft: 5\r\n      }\r\n    };\r\n  \r\n    if (this.state.redirectToReferrer) {\r\n      \r\n      return (<Redirect to={{\r\n        pathname : '/admin/home',\r\n        state: {redirectToReferrer: true,\r\n        }\r\n      }}/>)\r\n    }\r\n    return (\r\n      <ThemeProvider theme={theme}>\r\n        <div>\r\n          <div style={styles.loginContainer}>\r\n            <Paper style={styles.paper}>\r\n              <form>\r\n                <InputLabel htmlFor=\"component-simple\">Email</InputLabel>\r\n                <Input type=\"email\" placeholder=\"E-mail\" fullWidth={true} onChange={this.onChange} name='email' value={this.state.email} />\r\n                <div style={{ marginTop: 16 }}>\r\n                <InputLabel htmlFor=\"component-simple\">Password</InputLabel>\r\n                <Input type=\"password\" placeholder=\"Password...\" fullWidth={true} onChange={this.onChange} name='password' value={this.state.password} />\r\n                </div>\r\n\r\n                <div style={{ marginTop: 10 }}>\r\n                  <FormControlLabel\r\n                    control={\r\n                      <Checkbox\r\n                        label=\"Remember me\"\r\n                        style={styles.checkRemember.style}\r\n                        labelStyle={styles.checkRemember.labelStyle}\r\n                        iconStyle={styles.checkRemember.iconStyle}\r\n                      />\r\n                    }\r\n                    label=\"Remember me\"\r\n                  />\r\n                    <Button variant=\"contained\" color=\"primary\" style={styles.loginBtn} onClick={this.onHandleLogin}>\r\n                      Login\r\n                    </Button>\r\n                </div>\r\n              </form>\r\n            </Paper>\r\n\r\n            <div style={styles.buttonsDiv}>\r\n              <Button href=\"/admin/home\" style={styles.flatButton}>\r\n                <PersonAdd />\r\n                <span style={{ margin: 5 }}>Register</span>\r\n              </Button>\r\n\r\n              <Button href=\"/admin/home\" style={styles.flatButton}>\r\n                <Help />\r\n                <span style={{ margin: 5 }}>Forgot Password?</span>\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Dialog\r\n            open={this.state.open}\r\n            TransitionComponent={Transition}\r\n            keepMounted\r\n            onClose={this.handleClose}\r\n            aria-labelledby=\"alert-dialog-slide-title\"\r\n            aria-describedby=\"alert-dialog-slide-description\"\r\n        >\r\n        <DialogTitle id=\"alert-dialog-slide-title\">\r\n          {\"Login Failed!\"}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-slide-description\">\r\n            Mat khau khong chinh xac!\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={this.handleClose} color=\"primary\">\r\n            OK\r\n          </Button>\r\n        </DialogActions>\r\n        </Dialog>\r\n      </ThemeProvider>\r\n    );\r\n  }\r\n};\r\n\r\n\r\nexport default LoginPage;\r\n"]},"metadata":{},"sourceType":"module"}